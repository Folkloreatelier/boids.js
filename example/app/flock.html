<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>flock example</title>
<link href="styles/reset.css" rel="stylesheet" type="text/css">
<link href="styles/styles.css" rel="stylesheet" type="text/css">
</head>
<body>
    
<div class="wrapper">
    <div id="open-sb" class="menu-button menu-left"></div>
</div>

<div class="sidebar">
    <header>
        <h1><a href="https://github.com/after12am/boids.js">boids.js</a></h1>
    </header>
    <ul>
        <li><a href="seek.html">seek</a></li>
        <li><a href="flock.html">flock</a></li>
    </ul>
</div>

<a href="https://github.com/after12am/boids.js"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/simple-sidebar/dist/jquery.simplesidebar.min.js"></script>
<script src="bower_components/threejs/build/three.js"></script>
<script src="scripts/sidebar.js"></script>
<script src="scripts/object/bird.js"></script>
<script src="scripts/boids.js"></script>
<script type="text/javascript">

var camera, scene, renderer;
var birds = [];
var bird_num = 100;

function animate() {
    
    requestAnimationFrame(animate);
    render();
}

function render() {
    
    for (var i = 0; i < bird_num; i++) {
        birds[i].flock(birds.map(function(item) { return item.behavior(); }));
        birds[i].bounce(window.innerWidth + 200, window.innerHeight + 200, 300);
        birds[i].update();
    }
    
    renderer.render(scene, camera);
}

window.onload = function() {
    
    try {
        renderer = new THREE.WebGLRenderer({ antialias: true });
    } catch (e) {
        alert('Sorry, but your graphics card does not seem to support WebGL.');
        throw e;
    }
    
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
    camera.position.z = 400;
    
    scene = new THREE.Scene();
    
    for (var i = 0; i < bird_num; i++) {
        birds.push(new Bird());
        birds[i].boid.position.x = Math.random() * 1000 - 500;
        birds[i].boid.position.y = Math.random() * 1000 - 500;
        birds[i].boid.position.z = Math.random() * 1000 - 500;
        birds[i].boid.velocity.x = Math.random() * 4 - 2;
        birds[i].boid.velocity.y = Math.random() * 4 - 2;
        birds[i].boid.velocity.z = Math.random() * 4 - 2;
        birds[i].boid.maxForce   = Math.random() * .2;
        scene.add(birds[i]);
    }
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(new THREE.Color(0xfff9f4));
    
    document.body.appendChild( renderer.domElement );
    
    animate();
}
</script>
</body>
</html>